#! /usr/bin/env python
# This file is managed by Chef in the base::pagerduty_handoff recipe
# This script originated at https://github.com/ryanhoskin/pagerduty_notifications


#import datetime
#import requests
import smtplib
from email.mime.text import MIMEText

SMTP_HOST = '<%= @smtp_server %>'
"""The host to connect to send mail."""
FROM_ADDRESS = '<%= @smtp_from_address %>'
"""The address mail will be sent from."""

s = smtplib.SMTP(SMTP_HOST)
text = """You are now on-call for one week"""
msg = MIMEText(text)
msg['Subject'] = "You're on call this week"
sender = FROM_ADDRESS
recipient = 'youre-on-call@commercehub.pagerduty.com'
msg['From'] = sender
msg['To'] = recipient
s.sendmail(sender, [recipient], msg.as_string())

s.quit()
