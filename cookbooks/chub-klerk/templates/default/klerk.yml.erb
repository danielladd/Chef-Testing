# /etc/klerk.yml
#
# Generated by Chef

mongo:
  addresses: [ <%= @mongo_addresses ? @mongo_addresses.map {|x| "\"#{x}\""}.join(", ") : "" %> ]
  databaseName: <%= @klerk_database_name %>

blobStore:
  container: <%= @blobstore_database_name %>
  provider: gridfs

scheduler:
  databaseUrl: <%= @quartz_database_url %>
  threadCount: 5

hazelcast:
  groupName: <%= @hazelcast_group_name %>
  groupPassword: <%= @hazelcast_group_password %>

antivirus:
  hosts: [ <%= @antivirus_hosts ? @antivirus_hosts.map {|x| "\"#{x}\""}.join(", ") : "" %> ]

events:
<% if @product_data_event_endpoints %>
  productDataEventEndpoints:
<% @product_data_event_endpoints.each_pair do |applicationid, endpoint| %>
    <%= applicationid %>: <%= endpoint %>
<% end %>
<% end %>

productDataApplicationMetadataUpdateJobFinishedEventEndpoint: <%= @product_data_application_metadata_update_job_finished_event_endpoint %>

sprite:
  conductorUrl: <%= @sprite_conductor_url %>
  outputContainerPrefix: <%= @sprite_output_container_prefix %>

# HTTP-specific options.
http:

  # The port on which the HTTP server listens for service requests.
  port: 8090

  # The port on which the HTTP server listens for administrative requests.
  adminPort: 8091

  # The number of threads dedicated to accepting connections.
  # Should be less than or equal to two times the number of available processors/cores.
  acceptorThreads: 4

  # HTTP request log settings
  requestLog:

    # Settings for logging to stdout.
    console:

      # If true, write log statements to stdout.
      enabled: false

    # Settings for logging to a file.
    file:

      # If true, write log statements to a file.
      enabled: true

      # The file to which statements will be logged.
      currentLogFilename: /var/log/klerk/klerk-requests.log

      # When the log file rolls over, the file will be archived to klerk-requests-2012-03-15.log.gz,
      # klerk-requests.log will be truncated, and new statements written to it.
      archivedLogFilenamePattern: /var/log/klerk/klerk-requests-%d.log.gz

      # The maximum number of log files to archive.
      archivedFileCount: 5

# Logging settings.
logging:

  # The default level of all loggers. Can be OFF, ERROR, WARN, INFO, DEBUG, TRACE, or ALL.
  level: INFO

  # Logger-specific levels.
  loggers:
    klerk: INFO

  # Settings for logging to stdout.
  console:

    # If true, write log statements to stdout.
    enabled: false

  # Settings for logging to a file.
  file:

    # If true, write log statements to a file.
    enabled: true

    # The file to which statements will be logged.
    currentLogFilename: /var/log/klerk/klerk.log

    # When the log file rolls over, the file will be archived to klerk-2012-03-15.log.gz,
    # klerk.log will be truncated, and new statements written to it.
    archivedLogFilenamePattern: /var/log/klerk/klerk-%d.log.gz

    # The maximum number of log files to archive.
    archivedFileCount: 5

