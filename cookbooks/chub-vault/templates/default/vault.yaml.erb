# /etc/vault/vault.yaml
#
# Generated by Chef

<% if node["graphite"] -%>
metrics:
  <% if node["graphite"]["host"] -%>
  graphiteHost: <%= node["graphite"]["host"] %>
  <% end -%>
  <% if node["graphite"]["port"] -%>
  graphitePort: <%= node["graphite"]["port"] %>
  <% end -%>
  <% if node.chef_environment != "_default" -%>
  environment: <%= node.chef_environment %>
  <% end -%>

<% end -%>
searchPassword: <%= node["chub-vault"] && node["chub-vault"]["search_password"] %>

ldapRead:
  host: <%= node["chub-vault"] && node["chub-vault"]["ldap_read_host"] %>
  tls: false
  ssl: true

http:
  requestLog:
    console:
      enabled: false
    file:
      enabled: true
      currentLogFilename: /var/log/vault/vault-requests.log
      archivedLogFilenamePattern: /var/log/vault/vault-requests-%d.log.gz

logging:
  level: WARN
  loggers:
    vault: INFO
  console:
    enabled: false
  file:
    enabled: true
    currentLogFilename: /var/log/vault/vault.log
    archivedLogFilenamePattern: /var/log/vault/vault-%d.log.gz
